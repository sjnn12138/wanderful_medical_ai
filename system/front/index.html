<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧医院行政管理系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #10a37f;
            --primary-dark: #0d7a5f;
            --sidebar-bg: #202123;
            --sidebar-light: #2a2b32;
            --content-bg: #343541;
            --content-light: #40414f;
            --text-light: #ececf1;
            --text-gray: #8e8ea0;
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            background: linear-gradient(135deg, #1a1b26, #2c2d3a);
            color: var(--text-light);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* 左侧导航栏容器 */
        .left-container {
            width: 300px;
            display: flex;
            flex-direction: column;
            background: var(--sidebar-bg);
            border-right: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }

        /* 科室导航栏 */
        .department-sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 12px;
            overflow-y: auto;
            transition: var(--transition);
        }

        .department-header {
            padding: 12px;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .department-header i {
            margin-right: 8px;
        }

        .department-list {
            flex-grow: 1;
            margin-top: 10px;
        }

        .department-item {
            padding: 12px;
            margin-bottom: 6px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            background: var(--sidebar-light);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .department-item:hover {
            background: var(--content-light);
        }

        .department-item.active {
            background: var(--primary);
            color: white;
        }

        .department-item i {
            margin-right: 10px;
            font-size: 14px;
        }

        .add-department {
            padding: 12px;
            border-radius: var(--border-radius);
            background: var(--sidebar-light);
            color: var(--text-gray);
            cursor: pointer;
            text-align: center;
            margin-top: 10px;
            border: 1px dashed rgba(255,255,255,0.1);
            transition: var(--transition);
        }

        .add-department:hover {
            background: var(--content-light);
            color: var(--text-light);
        }

        /* 功能导航栏 */
        .function-sidebar {
            flex: 1;
            background: var(--sidebar-bg);
            padding: 12px;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }

        .back-to-departments {
            padding: 12px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            color: var(--text-gray);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .back-to-departments:hover {
            background: var(--sidebar-light);
            color: var(--text-light);
        }

        .back-to-departments i {
            margin-right: 10px;
        }

        .function-title {
            font-size: 16px;
            padding: 12px;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .function-item {
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            background: var(--sidebar-light);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .function-item:hover {
            background: var(--content-light);
        }

        .function-item i {
            margin-right: 10px;
            font-size: 14px;
            width: 20px;
            text-align: center;
        }

        .function-item.active {
            background: var(--primary);
            color: white;
        }

        /* 主内容区域 */
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-bar {
            height: 60px;
            background: var(--sidebar-bg);
            display: flex;
            align-items: center;
            padding: 0 24px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .hospital-info {
            display: flex;
            align-items: center;
        }

        .hospital-icon {
            width: 36px;
            height: 36px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }

        .hospital-name {
            font-size: 18px;
            font-weight: 600;
        }

        .current-department {
            margin-left: 24px;
            font-size: 14px;
            color: var(--text-gray);
            background: var(--sidebar-light);
            padding: 4px 12px;
            border-radius: 20px;
        }

        /* 聊天区域 */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--content-bg);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .message {
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            max-width: 80%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: var(--content-light);
            align-self: flex-end;
            border-bottom-right-radius: 0;
        }

        .ai-message {
            background: rgba(16, 163, 127, 0.2);
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }

        .message-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .message-header i {
            margin-right: 8px;
            font-size: 14px;
        }

        .user-message .message-header {
            color: #d9d9e3;
        }

        .ai-message .message-header {
            color: var(--primary);
        }

        .message-content {
            line-height: 1.6;
        }

        /* 输入区域 */
        .input-container {
            padding: 20px;
            position: relative;
            background: var(--content-bg);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .input-box {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-box input {
            width: 100%;
            padding: 14px 50px 14px 20px;
            border-radius: var(--border-radius);
            background: var(--content-light);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-light);
            font-size: 16px;
            outline: none;
            transition: var(--transition);
        }

        .input-box input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(16, 163, 127, 0.3);
        }

        .input-box button {
            position: absolute;
            right: 10px;
            background: transparent;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            font-size: 18px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .input-box button:hover {
            color: var(--primary);
            background: rgba(255,255,255,0.1);
        }

        .input-hint {
            text-align: center;
            font-size: 12px;
            color: var(--text-gray);
            margin-top: 12px;
        }

        /* 分析台样式 */
        .analytics-container {
            padding: 24px;
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .analytics-header {
            font-size: 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
        }

        .analytics-header i {
            margin-right: 12px;
            color: var(--primary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--content-light);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin: 10px 0;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-gray);
            font-size: 14px;
        }

        .chart-container {
            background: var(--content-light);
            border-radius: var(--border-radius);
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chart-title {
            margin-bottom: 20px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }

        .chart-title i {
            margin-right: 10px;
            color: var(--primary);
        }

        .chart-placeholder {
            flex: 1;
            background: var(--sidebar-bg);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-gray);
            flex-direction: column;
        }

        /* 知识库上传区域 */
        .knowledge-container {
            padding: 24px;
            display: none;
            flex-direction: column;
            height: 100%;
            background: var(--content-bg);
        }

        .knowledge-header {
            font-size: 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
        }

        .knowledge-header i {
            margin-right: 12px;
            color: var(--primary);
        }

        .upload-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .upload-section {
            background: var(--content-light);
            border-radius: var(--border-radius);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: var(--transition);
            border: 2px dashed rgba(255,255,255,0.1);
        }

        .upload-section:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .upload-icon {
            width: 80px;
            height: 80px;
            background: rgba(16, 163, 127, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .upload-icon i {
            font-size: 36px;
            color: var(--primary);
        }

        .upload-title {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .upload-description {
            color: var(--text-gray);
            margin-bottom: 20px;
            text-align: center;
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .upload-btn:hover {
            background: var(--primary-dark);
        }

        .uploaded-files {
            width: 100%;
            margin-top: 20px;
            display: none;
        }

        .file-list {
            width: 100%;
            border-collapse: collapse;
        }

        .file-list th {
            text-align: left;
            padding: 10px 15px;
            background: rgba(255,255,255,0.05);
            color: var(--text-gray);
        }

        .file-list td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .file-action {
            color: var(--primary);
            cursor: pointer;
        }

        .submit-section {
            margin-top: 30px;
            display: flex;
            justify-content: center;
        }

        .submit-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* 响应式调整 */
        @media (max-width: 1200px) {
            .left-container {
                width: 260px;
            }
        }

        @media (max-width: 992px) {
            .left-container {
                width: 220px;
            }
        }

        @media (max-width: 768px) {
            .left-container {
                position: absolute;
                left: -220px;
                z-index: 100;
                height: 100%;
                transition: left 0.3s ease;
            }

            .left-container.active {
                left: 0;
            }

            .menu-toggle {
                position: absolute;
                top: 15px;
                left: 15px;
                z-index: 90;
                background: var(--primary);
                color: white;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
            }

            .upload-container {
                flex-direction: column;
            }
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
    </style>
</head>
<body>
    <!-- 移动端菜单切换按钮 -->
    <div class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </div>

    <!-- 左侧导航栏容器 -->
    <div class="left-container" id="leftContainer">
        <!-- 科室导航栏 -->
        <div class="department-sidebar" id="departmentSidebar">
            <div class="department-header">
                <div><i class="fas fa-hospital"></i> 医院科室</div>
            </div>
            <div class="department-list">
                <div class="department-item active" data-dept="operations">
                    <i class="fas fa-chart-line"></i> 运营科
                </div>
                <div class="department-item" data-dept="outpatient">
                    <i class="fas fa-user-md"></i> 门诊部
                </div>
                <div class="department-item" data-dept="inpatient">
                    <i class="fas fa-procedures"></i> 住院部
                </div>
                <div class="department-item" data-dept="pharmacy">
                    <i class="fas fa-pills"></i> 药剂科
                </div>
                <div class="department-item" data-dept="lab">
                    <i class="fas fa-flask"></i> 检验科
                </div>
                <div class="department-item" data-dept="radiology">
                    <i class="fas fa-x-ray"></i> 放射科
                </div>
            </div>
            <div class="add-department" id="addDepartment">
                <i class="fas fa-plus"></i> 添加科室
            </div>
        </div>

        <!-- 功能导航栏 -->
        <div class="function-sidebar" id="functionSidebar">
            <div class="back-to-departments" id="backToDepartments">
                <i class="fas fa-arrow-left"></i> 返回科室列表
            </div>

            <div class="function-title">行政功能</div>
            <div class="function-item active" data-target="chat">
                <i class="fas fa-comments"></i> 新建会话
            </div>
            <div class="function-item" data-target="knowledge">
                <i class="fas fa-book"></i> 新建本地知识库
            </div>
            <div class="function-item" data-target="analytics">
                <i class="fas fa-chart-pie"></i> 智能分析台
            </div>

            <div class="function-title" style="margin-top: 30px;">快捷工具</div>
            <div class="function-item">
                <i class="fas fa-file-medical"></i> 生成运营报告
            </div>
            <div class="function-item">
                <i class="fas fa-users"></i> 人员排班管理
            </div>
            <div class="function-item">
                <i class="fas fa-box"></i> 物资库存管理
            </div>
            <div class="function-item">
                <i class="fas fa-calendar-check"></i> 会议安排
            </div>
        </div>
    </div>

    <!-- 主内容区域 -->
    <div class="main-container">
        <div class="top-bar">
            <div class="hospital-info">
                <div class="hospital-icon">
                    <i class="fas fa-hospital-alt"></i>
                </div>
                <div class="hospital-name">智慧医院行政管理系统</div>
            </div>
            <div class="current-department">
                <i class="fas fa-map-marker-alt"></i> 当前科室: 运营科
            </div>
        </div>

        <div class="chat-container" id="chatPanel">
            <div class="chat-messages">
                <div class="message ai-message">
                    <div class="message-header">
                        <i class="fas fa-robot"></i> 医院行政助手
                    </div>
                    <div class="message-content">
                        您好！我是医院行政智能助手。请问有什么可以帮您的？您可以：
                        <ul>
                            <li>查询科室运营数据</li>
                            <li>获取行政流程指导</li>
                            <li>分析医院资源使用情况</li>
                            <li>生成月度运营报告</li>
                        </ul>
                    </div>
                </div>

                <div class="message user-message">
                    <div class="message-header">
                        <i class="fas fa-user"></i> 管理员
                    </div>
                    <div class="message-content">
                        请展示运营科上个月的床位使用率数据
                    </div>
                </div>

                <div class="message ai-message">
                    <div class="message-header">
                        <i class="fas fa-robot"></i> 医院行政助手
                    </div>
                    <div class="message-content">
                        运营科2023年10月床位使用率数据如下：
                        <ul>
                            <li>普通床位使用率：87.5%</li>
                            <li>VIP床位使用率：63.2%</li>
                            <li>急诊床位使用率：92.1%</li>
                            <li>平均床位周转率：2.4次/床</li>
                        </ul>
                        与上月相比，普通床位使用率上升3.2%，VIP床位使用率下降5.7%。建议适当调整VIP床位资源配置。
                    </div>
                </div>
            </div>

            <div class="input-container">
                <div class="input-box">
                    <input type="text" placeholder="输入行政指令或问题..." id="messageInput">
                    <button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
                </div>
                <div class="input-hint">医院行政助手可以帮您分析数据、生成报告、解答行政流程问题</div>
            </div>
        </div>

        <!-- 分析台（默认隐藏） -->
        <div class="analytics-container" id="analyticsPanel">
            <div class="analytics-header">
                <i class="fas fa-chart-bar"></i> 运营科智能分析台
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-procedures fa-2x"></i>
                    <div class="stat-value">87.5%</div>
                    <div class="stat-label">床位使用率</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-user-injured fa-2x"></i>
                    <div class="stat-value">1,284</div>
                    <div class="stat-label">本月接诊人数</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-clock fa-2x"></i>
                    <div class="stat-value">18.3min</div>
                    <div class="stat-label">平均候诊时间</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-thumbs-up fa-2x"></i>
                    <div class="stat-value">94.7%</div>
                    <div class="stat-label">患者满意度</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-money-bill-wave fa-2x"></i>
                    <div class="stat-value">¥1.24M</div>
                    <div class="stat-label">本月营收</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-stethoscope fa-2x"></i>
                    <div class="stat-value">37</div>
                    <div class="stat-label">在岗医生数</div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">
                    <i class="fas fa-chart-line"></i> 近6个月床位使用率趋势
                </div>
                <div class="chart-placeholder">
                    <i class="fas fa-chart-bar fa-3x"></i>
                    <div>可视化图表区域</div>
                </div>
            </div>
        </div>

        <!-- 知识库上传区域 -->
        <div class="knowledge-container" id="knowledgePanel">
            <div class="knowledge-header">
                <i class="fas fa-book"></i> 新建本地知识库 - 运营科
            </div>

            <div class="upload-container">
                <div class="upload-section">
                    <div class="upload-icon">
                        <i class="fas fa-table"></i>
                    </div>
                    <h3 class="upload-title">上传表格文件</h3>
                    <p class="upload-description">上传Excel、CSV等表格文件，用于数据分析和报告生成</p>
                    <input type="file" id="tableUpload" class="file-input" accept=".xlsx, .xls, .csv">
                    <button class="upload-btn" onclick="document.getElementById('tableUpload').click()">
                        <i class="fas fa-upload"></i> 选择表格文件
                    </button>

                    <div class="uploaded-files" id="tableFiles">
                        <table class="file-list">
                            <thead>
                                <tr>
                                    <th>文件名</th>
                                    <th>大小</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="tableFilesList">
                                <!-- 上传的文件将显示在这里 -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="upload-section">
                    <div class="upload-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3 class="upload-title">上传文档文件</h3>
                    <p class="upload-description">上传PDF、Word、TXT等文档，用于知识库建设</p>
                    <input type="file" id="docUpload" class="file-input" accept=".pdf, .doc, .docx, .txt">
                    <button class="upload-btn" onclick="document.getElementById('docUpload').click()">
                        <i class="fas fa-upload"></i> 选择文档文件
                    </button>

                    <div class="uploaded-files" id="docFiles">
                        <table class="file-list">
                            <thead>
                                <tr>
                                    <th>文件名</th>
                                    <th>大小</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="docFilesList">
                                <!-- 上传的文件将显示在这里 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="submit-section">
                <button class="submit-btn" id="processKnowledge">
                    <i class="fas fa-cogs"></i> 处理并创建知识库
                </button>
            </div>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const departmentSidebar = document.getElementById('departmentSidebar');
        const functionSidebar = document.getElementById('functionSidebar');
        const backToDepartments = document.getElementById('backToDepartments');
        const departmentItems = document.querySelectorAll('.department-item');
        const currentDepartment = document.querySelector('.current-department');
        const menuToggle = document.getElementById('menuToggle');
        const leftContainer = document.getElementById('leftContainer');

        // 功能导航切换
        const functionItems = document.querySelectorAll('.function-item');
        const chatPanel = document.getElementById('chatPanel');
        const analyticsPanel = document.getElementById('analyticsPanel');
        const knowledgePanel = document.getElementById('knowledgePanel');

        // 知识库上传相关元素
        const tableUpload = document.getElementById('tableUpload');
        const docUpload = document.getElementById('docUpload');
        const tableFilesList = document.getElementById('tableFilesList');
        const docFilesList = document.getElementById('docFilesList');
        const processBtn = document.getElementById('processKnowledge');

        // 科室导航与功能栏切换
        function showFunctionSidebar() {
            departmentSidebar.style.display = 'none';
            functionSidebar.style.display = 'flex';
        }

        function showDepartmentSidebar() {
            functionSidebar.style.display = 'none';
            departmentSidebar.style.display = 'flex';
        }

        // 返回科室列表按钮事件
        backToDepartments.addEventListener('click', showDepartmentSidebar);

        // 科室选择事件
        departmentItems.forEach(item => {
            item.addEventListener('click', function() {
                // 更新当前科室状态
                departmentItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');

                // 更新顶部当前科室显示
                const deptName = this.textContent.trim();
                currentDepartment.innerHTML =
                    `<i class="fas fa-map-marker-alt"></i> 当前科室: ${deptName}`;

                // 更新知识库标题
                document.querySelector('.knowledge-header').innerHTML =
                    `<i class="fas fa-book"></i> 新建本地知识库 - ${deptName}`;

                // 显示功能栏
                showFunctionSidebar();
            });
        });

        // 添加新科室
        document.getElementById('addDepartment').addEventListener('click', () => {
            const newDept = prompt('请输入新科室名称:');
            if (newDept && newDept.trim() !== '') {
                const newItem = document.createElement('div');
                newItem.className = 'department-item';
                newItem.setAttribute('data-dept', 'new');
                newItem.innerHTML = `<i class="fas fa-plus-circle"></i> ${newDept}`;
                document.querySelector('.department-list').appendChild(newItem);

                // 添加点击事件
                newItem.addEventListener('click', function() {
                    departmentItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    currentDepartment.innerHTML =
                        `<i class="fas fa-map-marker-alt"></i> 当前科室: ${newDept}`;
                    document.querySelector('.knowledge-header').innerHTML =
                        `<i class="fas fa-book"></i> 新建本地知识库 - ${newDept}`;
                    showFunctionSidebar();
                });
            }
        });

        // 功能导航切换
        functionItems.forEach(item => {
            item.addEventListener('click', function() {
                // 移除所有active类
                functionItems.forEach(i => i.classList.remove('active'));
                // 添加active到当前项
                this.classList.add('active');

                const target = this.getAttribute('data-target');

                // 隐藏所有面板
                chatPanel.style.display = 'none';
                analyticsPanel.style.display = 'none';
                knowledgePanel.style.display = 'none';

                // 显示目标面板
                if (target === 'analytics') {
                    analyticsPanel.style.display = 'flex';
                } else if (target === 'knowledge') {
                    knowledgePanel.style.display = 'flex';
                } else {
                    chatPanel.style.display = 'flex';
                }
            });
        });

        // 文件上传处理
        tableUpload.addEventListener('change', function(e) {
            handleFileUpload(e, 'tableFiles', tableFilesList);
        });

        docUpload.addEventListener('change', function(e) {
            handleFileUpload(e, 'docFiles', docFilesList);
        });

        function handleFileUpload(event, containerId, fileListElement) {
            const files = event.target.files;
            if (files.length > 0) {
                const container = document.getElementById(containerId);
                container.style.display = 'block';

                // 清空现有列表
                fileListElement.innerHTML = '';

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const fileSize = formatFileSize(file.size);

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${file.name}</td>
                        <td>${fileSize}</td>
                        <td class="file-action" onclick="this.parentElement.remove()">
                            <i class="fas fa-trash-alt"></i>
                        </td>
                    `;
                    fileListElement.appendChild(row);
                }
            }
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // 处理知识库按钮
        processBtn.addEventListener('click', function() {
            const tableFiles = document.querySelectorAll('#tableFilesList tr');
            const docFiles = document.querySelectorAll('#docFilesList tr');

            if (tableFiles.length === 0 && docFiles.length === 0) {
                alert('请至少上传一个文件！');
                return;
            }

            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 处理中...';
            this.disabled = true;

            // 模拟处理过程
            setTimeout(() => {
                alert('知识库创建成功！系统已成功处理所有上传的文件。');
                this.innerHTML = '<i class="fas fa-check"></i> 处理完成';

                // 重置按钮状态
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-cogs"></i> 处理并创建知识库';
                    this.disabled = false;
                }, 2000);
            }, 3000);
        });

        // 发送消息功能
        document.getElementById('sendMessage').addEventListener('click', sendMessage);
        document.getElementById('messageInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (message !== '') {
                // 添加用户消息
                const messagesContainer = document.querySelector('.chat-messages');
                const userMessage = document.createElement('div');
                userMessage.className = 'message user-message';
                userMessage.innerHTML = `
                    <div class="message-header">
                        <i class="fas fa-user"></i> 管理员
                    </div>
                    <div class="message-content">${message}</div>
                `;
                messagesContainer.appendChild(userMessage);

                // 清空输入框
                input.value = '';

                // 滚动到底部
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

                // 模拟AI回复
                setTimeout(() => {
                    const aiMessage = document.createElement('div');
                    aiMessage.className = 'message ai-message';
                    aiMessage.innerHTML = `
                        <div class="message-header">
                            <i class="fas fa-robot"></i> 医院行政助手
                        </div>
                        <div class="message-content">
                            收到您的指令: "${message}"。正在分析相关数据，请稍候...
                        </div>
                    `;
                    messagesContainer.appendChild(aiMessage);

                    // 滚动到底部
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000);
            }
        }

        // 移动端菜单切换
        menuToggle.addEventListener('click', () => {
            leftContainer.classList.toggle('active');
        });

        // 初始化：默认显示运营科功能
        setTimeout(() => {
            showFunctionSidebar();
        }, 500);
    </script>
</body>
</html>